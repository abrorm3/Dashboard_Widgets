<div class="widget realtime-widget">
  <div class="widget-header">
    <span class="realtime-indicator" [class.active]="isUpdating()">
        <span class="pulse"></span>
        LIVE
      </span>
    <h3>{{ project()?.name || 'Loading...' }}</h3>
    <button class="close-btn" (click)="onClose()">Ã—</button>
  </div>
  <div class="widget-content">
    @if (project(); as proj) {
      <div class="realtime-stats">
        <div class="stat-card">
          <div class="stat-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M3 3v18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round"/>
              <path d="M18 17l-5-5-3 3-4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="stat-details">
            <div class="stat-label">Progress</div>
            <div class="stat-value">{{ progress() | number:'1.0-0' }}%</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M20 6L9 17l-5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="stat-details">
            <div class="stat-label">Completed</div>
            <div class="stat-value">{{ proj.tasksCompleted }}</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke="currentColor"
                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M14 2v6h6M16 13H8M16 17H8M10 9H8" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="stat-details">
            <div class="stat-label">Total</div>
            <div class="stat-value">{{ proj.tasksTotal }}</div>
          </div>
        </div>
      </div>
      <div class="update-info">
        <small>Auto-updates every 5 seconds</small>
        <small>Last update: {{ lastUpdate() | date:'HH:mm:ss' }}</small>
      </div>
    } @else {
      <div class="loading">Loading project data...</div>
    }
  </div>
</div>
