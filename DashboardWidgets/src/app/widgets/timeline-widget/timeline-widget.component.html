<div class="widget timeline-widget">
  <div class="widget-header">
    <h3>{{ project()?.name || 'Loading...' }}</h3>
    <button class="close-btn" (click)="onClose()">Ã—</button>
  </div>
  <div class="widget-content">
    @if (project(); as proj) {
      <div class="status-badge" [class]="statusClass()">
        {{ statusLabel() }}
      </div>
      <div class="timeline">
        <div class="timeline-item">
          <div class="timeline-label">Start Date</div>
          <div class="timeline-date">{{ formatDate(proj.startDate) }}</div>
        </div>
        <div class="timeline-progress">
          <div class="timeline-line">
            <div class="timeline-fill" [style.width.%]="timeProgress()"></div>
          </div>
          <div class="timeline-marker" [style.left.%]="timeProgress()"></div>
        </div>
        <div class="timeline-item">
          <div class="timeline-label">End Date</div>
          <div class="timeline-date">{{ formatDate(proj.endDate) }}</div>
        </div>
      </div>
      <div class="duration-info">
        <div class="info-row">
          <span class="label">Duration:</span>
          <span class="value">{{ duration() }} days</span>
        </div>
        <div class="info-row">
          <span class="label">Days Elapsed:</span>
          <span class="value">{{ daysElapsed() }} days</span>
        </div>
        <div class="info-row">
          <span class="label">Tasks left:</span>
          <div class="value">{{ tasksLeft() }}</div>
        </div>
        <div class="info-row">
          <span class="label">Days Remaining:</span>
          <span class="value">{{ daysRemaining() }} days</span>
        </div>
      </div>
    } @else {
      <div class="loading">Loading project data...</div>
    }
  </div>
</div>
